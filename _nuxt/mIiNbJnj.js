import{_ as M}from"./BQcl6wEP.js";import{_ as R}from"./DXK_J8Sr.js";import{g as L,j as u,c as n,o,k as N,a as l,l as e,F as P,r as q,n as V,t as f,_ as z,m as A,p as B,q as F,b as y,s as G,v as I,w as O,d as J}from"./D_dHRpl3.js";import{c as K,u as Q,f as U}from"./BI4RSTOF.js";import{f as $}from"./BAkyND_4.js";const W={class:"flex justify-center items-center space-x-2 my-4"},X={class:"flex space-x-2 mx-2"},Y=["onClick"],Z={__name:"NewsPagination",props:{postsPerPage:{type:Number,required:!0},totalEntryCount:{type:Number,required:!0}},emits:["handlePageChange"],setup(x,{emit:c}){const h=x,_=c,p=L(),i=u(()=>Number(p.query.page)||1),d=u(()=>Math.ceil(h.totalEntryCount/h.postsPerPage)),b=u(()=>{const t=d.value,s=i.value;return t<=5?Array.from({length:t},(a,m)=>m+1):s<=2?[1,2,3,4,5]:s>=t-1?[t-4,t-3,t-2,t-1,t]:[s-2,s-1,s,s+1,s+2]});function g(t){_("handlePageChange",t)}return(t,s)=>(o(),n("div",W,[e(i)!==1?(o(),n("button",{key:0,onClick:s[0]||(s[0]=a=>g(1)),class:"text-gray-400 hover:text-link-color transition","aria-label":"最初のページへ"},"<")):N("",!0),l("ul",X,[(o(!0),n(P,null,q(e(b),a=>(o(),n("li",{key:a},[l("button",{onClick:m=>g(a),class:V(["w-8 h-8 flex items-center justify-center rounded font-bold text-sm",e(i)===a?"border border-link-color text-link-color":"text-gray-500 hover:text-white hover:bg-link-color transition"])},f(a),11,Y)]))),128))]),e(i)!==e(d)?(o(),n("button",{key:1,onClick:s[1]||(s[1]=a=>g(e(d))),class:"text-gray-400 hover:text-link-color transition","aria-label":"最後のページへ"},">")):N("",!0)]))}},ee={},te={class:"fixed inset-0 z-[1000] flex items-center justify-center"};function se(x,c){return o(),n("div",te,c[0]||(c[0]=[l("div",{class:"w-14 h-14 rounded-full border-[5px] border-cyan-100 border-t-primary-light-blue animate-spin"},null,-1)]))}const ne=z(ee,[["render",se]]),oe={class:"relative px-4 md:px-14 py-4 md:py-12 max-w-6xl mx-auto md:mt-8"},ae={class:"absolute top-0 -left-[20%] -left-[20%] md:-left-[40%] w-[100%] h-[500px] min-w-80 min-h-[250px] md:bg-primary-light-blue-opacity -z-10 opacity-0"},re={key:0},le={key:1},ce={key:2},ie={className:"text-lg font-bold"},ue={className:"text-sm text-gray-700"},de=["innerHTML"],me={key:3},_e={key:4,class:"grid max-w-4xl"},pe={class:"text-sm text-gray-500 mb-1"},w=10,xe={__name:"news",setup(x){const c=L(),h=A(),_=u(()=>c.query.slug),p=u(()=>Number(c.query.page)||1),{locale:i}=B(),d=F(),b=u(()=>d.public.localeMap[i.value]),g=K({space:d.public.contentfulSpace,accessToken:d.public.contentfulToken}),{data:t,pending:s,error:a}=Q(()=>`news-${_.value??""}-${p.value??1}-${i.value}`,async()=>U({skip:(p.value-1)*w,limit:w,slug:_.value,client:g,locale:b.value}),{watch:[()=>i.value],server:!1}),m=u(()=>{var r,k;return _.value?(k=(r=t.value)==null?void 0:r.newsList)==null?void 0:k[0]:null}),S=u(()=>{var r;return((r=t.value)==null?void 0:r.newsList)??[]}),T=r=>{p.value!==r&&h.push({query:{...c.query,page:r}})};return(r,k)=>{var C;const D=M,E=R,j=Z,H=I("intersect");return o(),n(P,null,[y(D,{title:"News"}),l("section",oe,[G(l("div",ae,null,512),[[H,{direction:"left"}]]),e(s)?(o(),n("div",re,[y(ne)])):e(a)?(o(),n("div",le,"記事の取得に失敗しました")):e(m)?(o(),n("div",ce,[l("h2",ie,f(e(m).title),1),l("p",ue,f(e($)(e(m).date)),1),l("div",{className:"mt-4 pb-8 prose prose-neutral max-w-none",innerHTML:e(m).body},null,8,de)])):e(_)?(o(),n("div",me,"記事が見つかりません。")):(o(),n("div",_e,[(o(!0),n(P,null,q(e(S),v=>(o(),n("div",{key:v.slug,class:"pb-6"},[l("p",pe,f(e($)(v.date)),1),y(E,{to:`/news?slug=${v.slug}`,class:"text-sm md:text-base mb-1 hover:underline"},{default:O(()=>[J(f(v.title),1)]),_:2},1032,["to"])]))),128)),y(j,{"total-entry-count":((C=e(t))==null?void 0:C.total)||0,"posts-per-page":w,onHandlePageChange:T},null,8,["total-entry-count"])]))])],64)}}};export{xe as default};
